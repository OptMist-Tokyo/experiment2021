# 数理実験 サクサクラズベリーパイを焼こう
[hackmd](https://hackmd.io/w4cP7qvFRj2dxN_lsWAkYw?view)
[github](https://github.com/OptMist-Tokyo/experiment2021)

## 4/30 第四回
### mtg
- 進捗確認
    - ハード班
        - 部品を全部発注した
            - まだ届いていない
            - MTG中に届いた
        - 今できることはない
        - LEDは光りました
    - ソフト班
        - 環境構築をして両方のラズパイで音->色変換のプログラムが動いた
        - やること
            - LED側との接続
            - 相性いい色の提案
                - 単色だと味気がないので複数の色を出したい
                - 配置を検討しつつ
- やること
    - ハード班
        - 何が届いたかに依存する
            - 使えるものが届かなかったので何もすることがない
    - ソフト班
        - ソフト班からLEDを光らせられるようにする
            - インターフェースを取り決める
### 進捗
- ハード班
    - 未来へのビジョンを高めた
- ソフト班 with ハード班LEDパート
    - ラズパイの使い方について学んだ
    - LED回路の組み方を共有
        - ブレッドボードやトランジスタの使い方
    - 音 -> 色変換プログラムをpythonで叩けるようになった
### 次回
- ハード班
    - ポンプを動かす
    - 配置の原型を考える
- ソフト班
    - 音 -> 色変換のプログラムの叩き方をいい感じにする
        - サンプリングの周期とか色の平滑化など
    - 音量をみる
        - ポンプのON-OFFや光量の調節をする
    - 相性のいい色の追加アルゴリズムを作る
    - (時間に余裕があれば)機械学習のネタを考える

## 4/23 第三回
- 要約: 発注した商品のセットアップや前回発注できなかった商品の発注を行った
### 進捗記録
#### ハード班
- LEDが光った
    - まずLチカをした
        - [ここを参照](https://github.com/OptMist-Tokyo/experiment2021/blob/main/firmware/test/lchika.py)
    - 次に、PWMで連続的に色を設定できるようにした
        - [ここを参照](https://github.com/OptMist-Tokyo/experiment2021/blob/main/firmware/test/pwm.py)
    - さらにPWM×ダイナミック制御を試した
        - ソフトウェアPWMの仕様がよくわかんないが、うまく行かなかった
        - [ここを参照](https://github.com/OptMist-Tokyo/experiment2021/blob/main/firmware/test/dynamic_control.py)
    - LEDの光らせかたのパターンほしい
- ポンプ，発泡スチロール，発泡スチロールカッター，水槽のめどが立った
    - 残り必要なもの・・・防水加工のもろもろ，デコグッズ
        - 防水加工はアクリル樹脂で
        - デコグッズ 石を敷き詰めたい
- 排水をどうするか問題
    - 噴水中の水量を適量に保ちたい・・・下から排水ではなく，オーバーフローを処理する形で？
    - 供給と同じ数（出力）のポンプを用意して排水する？
- LEDの防水どうするか問題
    - アクリル樹脂による防水で固めればなんとかなる？
- ポンプの出力は届いてみないとわからない
#### ソフト班
- ラズパイ上にPython環境構築done
- マイクのセッティング録音再生OK
- 参考:https://blog.natade.net/2019/08/27/raspberry-pi-%E5%86%8D%E7%94%9F-%E9%8C%B2%E9%9F%B3-%E3%83%87%E3%83%90%E3%82%A4%E3%82%B9/
- [セットアップのコマンドはgitのここを参考に](https://github.com/OptMist-Tokyo/experiment2021/blob/main/software/setup.sh)
<!--
gitにコピペしました
- pip3 install -r requirements.txt
pip3 install opencv-python
pip3 install scipy
sudo apt install libatlas-base-dev
pip3 install pyAudioAnalysis
pip3 install matplotlib
pip3 install eyed3
pip3 install pydub
pip3 install tqdm
pip3 install sklearn
pip3 install plotly
pip3 install pyaudio
sudo apt-get install libportaudio2

sudo touch /etc/modprobe.d/alsa-base.conf
sudo vim /etc/modprobe.d/alsa-base.conf

options snd slots=snd_usb_audio,and_bcm2835
options snd_usb_audio index=0
options snd_bcm2835 index=1

sudo reboot

amixer -D hw:1 sset Mic 100%
-->

## 4/16 第二回
- 要約: 案をまとめて、暫定案で役割分担しつつ動き出した
### 前回の振り返り
- ドローン
    - 技術的に無理
- ソーシャルディスタンス囲碁
    - 技術課題を解決するアイデアはあるが、そうすると逆に簡単すぎる
        - 碁盤をカメラで撮ってプロジェクタ使って映すだけ
- 振り出しに戻る
    - 一周したので留数が手に入った
### 案出し
- 噴水
    - 今まで出た案の中では一番いいのでは？
    - リアル世界に働きかけることで、ラズパイのメリットが活かせる
    - 音楽を流して、それに合わせて制御すると知的な要素が入る
        - 明るい音楽 or 暗い音楽くらいのラフなあれがわかればよい
        - そういうの、ありそう
- 自明じゃない認識がしたい
    - マシンの力足りる？
    - 機械学習できる？
        - CPUで学ぶのがつらい
        - ラズパイ上じゃなく、GPUで学習
        - できたモデルをこっちにもってくる
        - 実は先の例はラズパイ上で認識を行っていない
            - AWSに投げてる？
    - 大層なことはできない？
        - ルールベース！
    - ニューラルネットは層があってサクサクしてそうなので、ラズパリーパイに載せたい！
- オセロ再考
    - 磁石でできた石とかは簡単なのでは？
    - くるくるおせろというすごく便利なやつがある
- ラズパイ、何ができるんだっけ
### ほしい要素
- スマホ
- 画像認識
- GPIO(光/モーター/センサ)
- 洗濯物を回収してほしい
### 噴水
- 認識
    - 機械学習を使って曲から色をやるやつがあるらしい
- 水の制御
- **噴水に決定**
### 噴水の検討
- 仕様の決定
- {部屋の音, 音楽} -> {水, 光}
    - inputは何にするか？
    - 音楽にしたい？部屋の音が楽？
        - 音楽は難しそう
        - リスクヘッジとして、部屋の音を並行開発すべき？
#### 要素の洗い出し
- ハード要素
    - 水を流す
        - 出したり出さなかったりする
    - 水がピューってなるところ
    - 光に配置する
- ソフト要素
    - 音 -> 光変換
    - 光 & 水流の制御
#### タスク分担
- 認識担当: 2人
    - 音/音楽から光り方を指定する
- ハード担当: 3人
    - 噴水がピューってする部分とLED光らせる部分を作る
### 作業日誌
#### 認識班
- [gitのコード](https://github.com/tyiannak/color_your_music_mood)を動かすことができた
    - ほとんどもとのコードのままで動いた
    - なんとかライトのライブラリのimportだけコメントアウトした
- マイクから入力された音に対応する色を識別することができた
- 次回: ラズパイで環境構築
#### ハード班
- 部品を探した
- 水回り
    - ポンプとホース
- LED
    - 第一購買部にはなかった
- 水がdynamicな動きするとつらそう
    - 防水とか
### まとめ
- 暫定的に噴水の作成に取り掛かることにした
- ソフト
    - 既存のソフトウェアを利用することで実現可能であることがわかった
- ハード
    - ある程度予算をかければ噴水を作れるかもしれない
    - 光らせる部分との兼ね合いが不明で、予算をかけてできなかったときにまずいかも？

## 4/9 第一回
- 要約: 案出しをした
### 進め方
- 授業の回数
    - 作業できるのは7回
        - 4/9,16,23,30, 5/7,21,28
    - 6/4: 発表練習
    - 6/11: 発表
### 案だし
- 発表の形式
    - オンラインの組もいるので、ハイブリットかオンラインになると考えられる
- 水やり
    - ラズパイの定番
    - 噴水みたいなのをして光ったりする
    - デザインどうするの？
        - コピってくればいい
- 過去の没アイデア
    - [2019年](https://github.com/OptMist-Tokyo/experiment2019/blob/master/diary.md)
- リアルにモノを作りたい
- 要素技術から考える
    - センサー、アクチュエータは何を使うか
    - ものを動かしたい
- 雨降った時に洗濯物取り込んでほしい
- 音と光がアツい
    - 要素技術が難しくないけどバエる

- 囲碁、将棋をやる
    - 画像認識して置く
    - 囲碁だったら白黒だし置くだけ
    - 将棋は種類の認識と置いてあるのをとる、裏返すという操作が必要
    - とるのがネック？ -> 吸引すれば
    - 給油口みたいなとこからザーッと出してくれると楽そう
- パズル解く系よりは実世界に干渉してほしい
- MOCHAより効率的なものを作れないか？
- 2台あるので通信させたい
    - ソーシャルディスタンス囲碁
        - 盤面を2つ用意して、それぞれで人が指す
        - 人の指した手を、ラズパイがもう一方の盤面に再現
- ソーシャルディスタンスはバズってるのでアリ
- バエたい
    - タピオカ？
        - あいつはもう終わった...
    - スタバ
        - 近いのでおつかいにいく
- 発表のウケも考えたいよね
    - IoTで手元から操作とか
- 何ができるのか
    - 過去の遺物
    - ブレボ、ドトマト、サーボモーター、webカメラなどがある
- 昔の「黒板写すやつ」はかなりいいっすね
- 映像を作る系はバエる
    - プロジェクタに写して触ったら変化するやつ
    - 触って水滴がぽしゃんとか
        - そういうのはやりやすくて、花びらとか散らすとむずい
    - バエるやつ、デザイン出来ないと逆にショボくなるのがボトルネック
        - 噴水とかは電飾の数で決まる
        - プロジェクタは結構頑張らないとね
    - 持続時間が長いと楽しい
        - 1分くらい
        - 発表が「動いた！」で終わりじゃなくて、長めにできるやつ
- 他学科のIoT演習のアイデアを見て ~~パク~~ リスペクトしよう
    - [機械工学科](https://ut-mech.com/programs/exhibition.shtml)
    - 音楽もバエるポイントかもしれないっすね
- 囲碁は大変？
    - 3Dプリンタとかないし
    - 実は計数には工作室がある
- 光出しとけばバエる
- ラズパイのメリットを考える
    - 持ち運びしやすい
    - パソコン自体が動ける
- なんか飛ばす
    - ドローンに乗せるみたいな
    - 人の頭の上に追従する傘
        - 雨の浮力に打ち勝つ ちから！
- 審判がいるゲームの審判をさせる
- 人と人が接触する系は自動化しづらい
- 投げると勝手にとってくれるごみ箱
- 先生のツイートを先生の声で読み上げる
- 持ち運べると嬉しい！
- 音声認識する
- アレクサ作る
- 計数工学エレクトリカルパレード
    - 6号館を一周する
### ちょっとまとめ
- 共通認識: web上で完結するのはちょっと
    - リアルにもの動かしたいよね
    - パズルとかゲームとかに干渉したいよね
- 主張
    - バエ: 光, 音
### アイデアのまとめ
- バエるやつ
- ソーシャルディスタンス囲碁
- 人に追従する傘
### アイデアの検討
#### 人に追従する傘
- バエる
- 難易度
    - 追従目標の認識
        - 髪の毛の認識 or マーカーをつける
        - やっぱ認識させたいよね
    - 光らせればバエる
        - 後光がさしてる感じにできるっすね！
    - 飛ぶ？
- 課題
    - 雨に濡れる
        - ドローンが下に来ると浮力が得られない
        - 日傘とか天使の輪とか、逃げ道はある
    - 失敗リスクがある
        - 飛ばないかも
        - リアルタイムに制御する必要がある
- アイデア
    - 骨組みは頑張らなくていい
- 備考
    - やってる人もいるが、挫折してる
#### ソーシャルディスタンス囲碁
- 置くところ
    - がんばれ
- 石はどうやって回収する
    - 人が「ターンの終わりです」ってラズパイに伝えるときに石を渡せばいいのでは
- 失敗リスクは低い
- ただ、オッとはならんよね
- TAさんのアドバイス: 機械側で石に干渉するのは難しいので、プロジェクトポインターを用いればどうか
    - たしかに実現できるが、「リアル世界に干渉したい」という共通認識から外れそう？
### まとめ！
- アイデアの検討を行った
    - 固まったアイデアとして2つの案が検討されたが、技術面を含めさらなる検討が必要


